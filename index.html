<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>361Â° å®˜æ–¹å•†åŸ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans SC', 'Inter', sans-serif;
    }
    .product-card:hover img {
      transform: scale(1.05);
    }
    .size-btn.selected, .color-btn.selected {
        border-color: #111827;
        background-color: #111827;
        color: #ffffff;
    }
    .size-btn:disabled {
        background-color: #f3f4f6;
        color: #d1d5db;
        cursor: not-allowed;
        position: relative;
        overflow: hidden;
    }
    .size-btn:disabled::after {
        content: '';
        position: absolute;
        top: 50%;
        left: -10%;
        width: 120%;
        height: 1px;
        background: #9ca3af;
        transform: rotate(-45deg);
    }
    [x-cloak] { display: none !important; }
  </style>
</head>
<body x-data="app()" x-cloak class="bg-gray-50">
  
  <!-- Loading Spinner -->
  <div x-show="isLoading" class="fixed inset-0 bg-white flex items-center justify-center z-50">
      <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-red-600"></div>
  </div>

  <!-- Header -->
  <header class="bg-white/90 backdrop-blur-sm shadow-sm sticky top-0 z-40">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <div class="flex items-center">
          <h1 class="text-3xl font-bold text-red-600">361Â°</h1>
          <nav class="ml-10 hidden md:flex space-x-8">
            <button @click="activeCategory = 'all'" :class="activeCategory === 'all' ? 'text-red-600' : 'text-gray-700'" class="text-sm font-medium hover:text-red-600 transition-colors duration-200">ğŸ‘Ÿ å…¨éƒ¨</button>
            <button @click="activeCategory = 'running'" :class="activeCategory === 'running' ? 'text-red-600' : 'text-gray-700'" class="text-sm font-medium hover:text-red-600 transition-colors duration-200">ğŸƒ è·‘æ­¥</button>
            <button @click="activeCategory = 'lifestyle'" :class="activeCategory === 'lifestyle' ? 'text-red-600' : 'text-gray-700'" class="text-sm font-medium hover:text-red-600 transition-colors duration-200">ğŸ‘• ä¼‘é—²</button>
            <button @click="activeCategory = 'basketball'" :class="activeCategory === 'basketball' ? 'text-red-600' : 'text-gray-700'" class="text-sm font-medium hover:text-red-600 transition-colors duration-200">ğŸ€ ç¯®çƒ</button>
          </nav>
        </div>
        
        <div class="flex items-center space-x-4">
          <div class="relative hidden sm:block">
            <input type="text" placeholder="æœç´¢å•†å“..." x-model="searchTerm" class="pl-10 pr-4 py-2 border border-gray-300 rounded-full text-sm w-64 focus:outline-none focus:ring-2 focus:ring-red-500 transition-all">
            <svg class="absolute left-3 top-2.5 h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
          </div>
          
          <button @click="showCart = true" class="relative p-2 hover:bg-gray-100 rounded-full">
            <svg class="h-6 w-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
            <span x-show="cart.length > 0" x-text="getTotalItems()" class="absolute -top-1 -right-1 bg-red-600 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full"></span>
          </button>
          
          <template x-if="!user">
            <button @click="showLoginModal = true" class="text-sm text-gray-700 hover:text-red-600">ç™»å½•</button>
          </template>
          <template x-if="user">
            <div class="flex items-center space-x-4">
              <span class="text-sm text-gray-700 hidden sm:inline">æ¬¢è¿, <span x-text="user.name"></span></span>
              <button @click="logout()" class="text-sm text-gray-700 hover:text-red-600">é€€å‡º</button>
            </div>
          </template>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

    <!-- Hero Section -->
    <div class="bg-gradient-to-r from-red-500 to-orange-500 rounded-lg shadow-lg p-8 md:p-12 mb-12 text-white flex items-center">
        <div class="flex-1">
            <h2 class="text-3xl md:text-5xl font-bold mb-2">é£ç‡ƒ3ä»£ï¼Œç–¾é€Ÿä¸Šå¸‚</h2>
            <p class="text-lg md:text-xl mb-6">ä¸ºé€Ÿåº¦è€Œç”Ÿï¼Œä½“éªŒæè‡´è½»ç›ˆä¸å›å¼¹ã€‚</p>
            <button @click="activeCategory = 'running'" class="bg-white text-red-600 font-bold py-3 px-6 rounded-lg hover:bg-gray-100 transition-colors">ç«‹å³æ¢ç´¢</button>
        </div>
        <div class="hidden md:block w-1/3">
            <img src="https://placehold.co/400x300/ffffff/FE5A28?text=é£ç‡ƒ3" alt="Running Shoe" class="transform -rotate-12 hover:rotate-0 transition-transform duration-500">
        </div>
    </div>

    <!-- Product Grid -->
    <div>
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-2xl font-bold text-gray-800">
            <span x-text="categories.find(c => c.id === activeCategory)?.name"></span>
            <span class="text-gray-500 ml-2 text-lg">(<span x-text="filteredProducts.length"></span>)</span>
          </h1>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
          <template x-for="product in filteredProducts" :key="product.id">
            <div class="bg-white rounded-lg shadow-sm hover:shadow-xl transition-shadow duration-300 product-card flex flex-col">
              <div class="relative overflow-hidden">
                <img :src="product.images[0]" :alt="product.name" class="w-full h-72 object-cover transition-transform duration-300">
                <template x-if="product.isNew">
                  <div class="absolute top-4 left-4 bg-red-600 text-white px-2 py-1 text-xs font-semibold rounded">æ–°å“</div>
                </template>
                <button @click="toggleFavorite(product.id)" class="absolute top-4 right-4 p-2 rounded-full bg-white/70 backdrop-blur-sm transition-colors duration-200">
                  <svg class="h-5 w-5" :class="favorites.includes(product.id) ? 'text-red-500 fill-current' : 'text-gray-500'" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.682l-1.318-1.364a4.5 4.5 0 00-6.364 0z"></path></svg>
                </button>
              </div>
              
              <div class="p-4 flex flex-col flex-grow">
                <h3 class="text-base font-semibold text-gray-800 mb-2 line-clamp-2 flex-grow" x-text="product.name"></h3>
                <p class="text-sm text-gray-500 mb-3" x-text="`${product.colors.length} ç§é¢œè‰²`"></p>
                <div class="flex items-center mb-4">
                  <span class="text-lg font-bold text-red-600">Â¥<span x-text="product.salePrice"></span></span>
                  <span class="text-sm text-gray-500 line-through ml-2">Â¥<span x-text="product.retailPrice"></span></span>
                </div>
                <button @click="displayProductInModal(product)" class="w-full bg-gray-900 text-white py-2.5 rounded-lg hover:bg-gray-700 transition-colors duration-200 font-semibold text-sm">é€‰æ‹©é€‰é¡¹</button>
              </div>
            </div>
          </template>
        </div>
      </div>
    </div>
  </main>

  <!-- Product Detail Modal -->
  <div x-show="selectedProduct" @keydown.escape.window="closeProductModal()" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
    <div @click.away="closeProductModal()" class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto" x-show="selectedProduct" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95">
      <template x-if="selectedProduct">
        <div class="p-6">
          <div class="flex justify-end">
            <button @click="closeProductModal()" class="text-gray-400 hover:text-gray-600">&times;</button>
          </div>
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div>
              <img :src="modalImage" :alt="selectedProduct.name" class="w-full h-96 object-cover rounded-lg mb-4">
              <div class="grid grid-cols-4 gap-2">
                  <template x-for="img in selectedProduct.images" :key="img">
                      <img :src="img" @click="modalImage = img" class="w-full h-24 object-cover rounded-md cursor-pointer" :class="{'ring-2 ring-red-500': modalImage === img}">
                  </template>
              </div>
            </div>
            <div class="flex flex-col">
              <h2 class="text-2xl font-bold text-gray-800" x-text="selectedProduct.name"></h2>
              <p class="text-sm text-gray-500 mt-1">æ¬¾å·: <span x-text="selectedProduct.model"></span></p>
              <div class="flex items-center my-4">
                <span class="text-2xl font-bold text-red-600">Â¥<span x-text="selectedProduct.salePrice"></span></span>
                <span class="text-lg text-gray-500 line-through ml-3">Â¥<span x-text="selectedProduct.retailPrice"></span></span>
              </div>
              <p class="text-gray-700 text-sm mb-6" x-text="selectedProduct.description"></p>
              
              <div class="mt-auto">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">é¢œè‰²: <span x-text="selectedColor" class="font-bold"></span></label>
                  <div class="flex flex-wrap gap-2">
                    <template x-for="color in selectedProduct.colors" :key="color">
                      <button @click="selectedColor = color" :class="{'selected': selectedColor === color}" class="color-btn px-4 py-2 border rounded-full text-sm transition-colors duration-200" x-text="color"></button>
                    </template>
                  </div>
                </div>
                <div class="mt-4">
                  <label class="block text-sm font-medium text-gray-700 mb-2">å°ºç </label>
                  <div class="grid grid-cols-4 gap-2">
                    <template x-for="sizeInfo in selectedProduct.sizes" :key="sizeInfo.size">
                      <button @click="selectedSize = sizeInfo.size" :disabled="!sizeInfo.inStock" :class="{'selected': selectedSize === sizeInfo.size}" class="size-btn h-10 border rounded text-sm transition-colors duration-200" x-text="sizeInfo.size"></button>
                    </template>
                  </div>
                </div>
                <button @click="handleAddToCart()" :disabled="!selectedSize || !selectedColor" class="w-full mt-4 bg-gray-900 text-white py-3 rounded-lg font-semibold transition-colors duration-200 disabled:bg-gray-300 disabled:cursor-not-allowed hover:bg-gray-700">åŠ å…¥è´­ç‰©è½¦</button>
              </div>
            </div>
          </div>
        </div>
      </template>
    </div>
  </div>

  <!-- Shopping Cart Sidebar -->
  <div x-show="showCart" @keydown.escape.window="showCart = false" class="fixed inset-0 z-50">
      <div x-show="showCart" @click="showCart = false" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="absolute inset-0 bg-black bg-opacity-50"></div>
      <div x-show="showCart" x-transition:enter="transform transition ease-in-out duration-300" x-transition:enter-start="translate-x-full" x-transition:enter-end="translate-x-0" x-transition:leave="transform transition ease-in-out duration-300" x-transition:leave-start="translate-x-0" x-transition:leave-end="translate-x-full" class="fixed top-0 right-0 h-full w-full max-w-md bg-white shadow-xl flex flex-col">
          <div class="flex items-center justify-between p-6 border-b">
              <h3 class="text-xl font-bold text-gray-800">è´­ç‰©è½¦</h3>
              <button @click="showCart = false" class="p-2 hover:bg-gray-100 rounded-full">&times;</button>
          </div>
          <div class="flex-grow p-6 overflow-y-auto">
              <template x-if="cart.length === 0">
                  <div class="text-center py-8 text-gray-500">
                      <p class="mt-4">ä½ çš„è´­ç‰©è½¦æ˜¯ç©ºçš„</p>
                  </div>
              </template>
              <div class="space-y-4">
                  <template x-for="item in cart" :key="item.cartId">
                      <div class="flex space-x-4">
                          <img :src="item.image" :alt="item.name" class="w-24 h-24 object-cover rounded-md">
                          <div class="flex-1 min-w-0">
                              <h4 class="text-sm font-semibold text-gray-800 truncate" x-text="item.name"></h4>
                              <p class="text-xs text-gray-500" x-text="`å°ºç : ${item.size} / é¢œè‰²: ${item.color}`"></p>
                              <p class="text-sm font-bold text-red-600 mt-1">Â¥<span x-text="item.salePrice"></span></p>
                              <div class="flex items-center justify-between mt-2">
                                  <div class="flex items-center border rounded">
                                      <button @click="updateQuantity(item.cartId, item.quantity - 1)" class="w-7 h-7 flex items-center justify-center hover:bg-gray-100">-</button>
                                      <span class="w-8 text-center text-sm" x-text="item.quantity"></span>
                                      <button @click="updateQuantity(item.cartId, item.quantity + 1)" class="w-7 h-7 flex items-center justify-center hover:bg-gray-100">+</button>
                                  </div>
                                  <button @click="removeFromCart(item.cartId)" class="text-red-500 hover:text-red-700 text-xs font-semibold">åˆ é™¤</button>
                              </div>
                          </div>
                      </div>
                  </template>
              </div>
          </div>
          <template x-if="cart.length > 0">
              <div class="p-6 border-t bg-gray-50">
                  <div class="flex justify-between mb-4">
                      <span class="text-lg font-medium">æ€»è®¡</span>
                      <span class="text-xl font-bold">Â¥<span x-text="getTotalPrice().toFixed(2)"></span></span>
                  </div>
                  <button class="w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-colors">å»ç»“ç®—</button>
              </div>
          </template>
      </div>
  </div>
  
  <!-- Login Modal -->
  <div x-show="showLoginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
    <div @click.away="showLoginModal = false" class="bg-white rounded-lg max-w-md w-full p-6" x-show="showLoginModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95">
        <div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold text-gray-800">ç™»å½•</h2><button @click="showLoginModal = false" class="text-gray-400 hover:text-gray-600">&times;</button></div>
        <form @submit.prevent="handleLogin" class="space-y-4">
          <div><label class="block text-sm font-medium text-gray-700 mb-1">é‚®ç®±</label><input type="email" x-model="loginForm.email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required></div>
          <div><label class="block text-sm font-medium text-gray-700 mb-1">å¯†ç </label><input type="password" x-model="loginForm.password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required></div>
          <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-md hover:bg-red-700 transition-colors duration-200 font-semibold">ç™»å½•</button>
          <div class="text-center mt-4"><p class="text-sm text-gray-600">è¿˜æ²¡æœ‰è´¦å·? <button type="button" @click="showLoginModal = false; showRegisterModal = true;" class="text-red-600 hover:text-red-700">æ³¨å†Œ</button></p></div>
        </form>
    </div>
  </div>
  
  <!-- Register Modal -->
  <div x-show="showRegisterModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
    <div @click.away="showRegisterModal = false" class="bg-white rounded-lg max-w-md w-full p-6" x-show="showRegisterModal" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95">
        <div class="flex justify-between items-center mb-6"><h2 class="text-2xl font-bold text-gray-800">æ³¨å†Œ</h2><button @click="showRegisterModal = false" class="text-gray-400 hover:text-gray-600">&times;</button></div>
        <form @submit.prevent="handleRegister" class="space-y-4">
            <div><label class="block text-sm font-medium text-gray-700 mb-1">å§“å</label><input type="text" x-model="registerForm.name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required></div>
            <div><label class="block text-sm font-medium text-gray-700 mb-1">é‚®ç®±</label><input type="email" x-model="registerForm.email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required></div>
            <div><label class="block text-sm font-medium text-gray-700 mb-1">å¯†ç </label><input type="password" x-model="registerForm.password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required minlength="6"></div>
            <div><label class="block text-sm font-medium text-gray-700 mb-1">ç¡®è®¤å¯†ç </label><input type="password" x-model="registerForm.confirmPassword" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500" required></div>
            <button type="submit" class="w-full bg-red-600 text-white py-2 rounded-md hover:bg-red-700 transition-colors duration-200 font-semibold">æ³¨å†Œ</button>
            <div class="text-center mt-4"><p class="text-sm text-gray-600">å·²æœ‰è´¦å·? <button type="button" @click="showRegisterModal = false; showLoginModal = true;" class="text-red-600 hover:text-red-700">ç™»å½•</button></p></div>
        </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white mt-16">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        <div><h3 class="text-lg font-semibold mb-4">361Â°</h3><p class="text-gray-300 text-sm">å¤šä¸€åº¦çƒ­çˆ±ï¼Œå¤šä¸€ä»½ä¸“ä¸šã€‚</p></div>
        <div><h4 class="font-semibold mb-4">å®¢æˆ·æœåŠ¡</h4><ul class="space-y-2 text-sm text-gray-300"><li><a href="#" class="hover:text-white">å¸®åŠ©ä¸­å¿ƒ</a></li><li><a href="#" class="hover:text-white">é…é€ä¿¡æ¯</a></li><li><a href="#" class="hover:text-white">é€€æ¢è´§æ”¿ç­–</a></li></ul></div>
        <div><h4 class="font-semibold mb-4">å…³äºæˆ‘ä»¬</h4><ul class="space-y-2 text-sm text-gray-300"><li><a href="#" class="hover:text-white">å“ç‰Œæ•…äº‹</a></li><li><a href="#" class="hover:text-white">æ–°é—»ä¸­å¿ƒ</a></li><li><a href="#" class="hover:text-white">åŠ å…¥æˆ‘ä»¬</a></li></ul></div>
        <div><h4 class="font-semibold mb-4">è®¢é˜…æˆ‘ä»¬</h4><p class="text-gray-300 text-sm mb-4">è·å–æœ€æ–°äº§å“ä¿¡æ¯å’Œä¼˜æƒ ã€‚</p><div class="flex"><input type="email" placeholder="æ‚¨çš„é‚®ç®±" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-l-md text-sm focus:outline-none focus:ring-2 focus:ring-red-500"><button class="bg-red-600 px-4 py-2 rounded-r-md text-sm font-semibold">è®¢é˜…</button></div></div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400"><p>&copy; 2024 361Â°. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p></div>
    </div>
  </footer>

  <!-- Toast Notification -->
  <div x-show="toast.show" x-text="toast.message"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-2"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform translate-y-2"
        class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-full shadow-lg z-50">
  </div>

  <script>
    function app() {
      return {
        // State
        isLoading: true,
        activeCategory: 'all',
        searchTerm: '',
        cart: [],
        favorites: [],
        selectedProduct: null,
        modalImage: '',
        selectedSize: null,
        selectedColor: null,
        showCart: false,
        showLoginModal: false,
        showRegisterModal: false,
        user: null,
        loginForm: { email: '', password: '' },
        registerForm: { name: '', email: '', password: '', confirmPassword: ''},
        toast: { show: false, message: '', timer: null },
        
        // Data
        categories: [
          { id: 'all', name: 'å…¨éƒ¨å•†å“' }, { id: 'running', name: 'è·‘æ­¥' },
          { id: 'lifestyle', name: 'ä¼‘é—²' }, { id: 'basketball', name: 'ç¯®çƒ' }
        ],
        products: [
          {
            id: 1, name: "361Â° é£ç‡ƒ3 SE ä¸“ä¸šè·‘æ­¥é‹", category: "running", sku: "361R001-01", model: "ULTRA-2024", retailPrice: 899, salePrice: 699, isNew: true,
            images: ["https://placehold.co/600x600/1e40af/ffffff?text=é£ç‡ƒ3+ä¸»å›¾", "https://placehold.co/600x600/1e40af/ffffff?text=é£ç‡ƒ3+ä¾§é¢", "https://placehold.co/600x600/1e40af/ffffff?text=é£ç‡ƒ3+é‹åº•"],
            sizes: [ {size: '39', inStock: true}, {size: '40', inStock: true}, {size: '41', inStock: false}, {size: '42', inStock: true}, {size: '43', inStock: true}, {size: '44', inStock: false}, {size: '45', inStock: true}],
            colors: ["å†°å·è“", "æ›œçŸ³é»‘", "äº®ç™½"],
            description: "é‡‡ç”¨QU!KFLAME CQTä¸­åº•ç§‘æŠ€ï¼Œæä¾›å“è¶Šèƒ½é‡å›é¦ˆä¸ç¼“éœ‡æ€§èƒ½ï¼Œä¸“ä¸ºç²¾è‹±è·‘è€…æ‰“é€ ã€‚",
          },
          {
            id: 2, name: "361Â° CQT 2.0 ä¼‘é—²æ¿é‹", category: "lifestyle", sku: "361L002-02", model: "CQT-2.0", retailPrice: 599, salePrice: 459, isNew: false,
            images: ["https://placehold.co/600x600/dc2626/ffffff?text=CQT+2.0", "https://placehold.co/600x600/dc2626/ffffff?text=CQT+ä¾§é¢"],
            sizes: [ {size: '37', inStock: true}, {size: '38', inStock: true}, {size: '39', inStock: true}, {size: '40', inStock: false}, {size: '41', inStock: true}],
            colors: ["ç»å…¸çº¢", "ç™¾æ­ç°", "æ¸…æ–°ç»¿"],
            description: "å¤å¤æ½®æµè®¾è®¡ï¼Œç»“åˆç°ä»£èˆ’é€‚è„šæ„Ÿï¼Œæ˜¯æ‚¨æ—¥å¸¸å‡ºè¡—çš„ç†æƒ³ä¹‹é€‰ã€‚",
          },
          {
            id: 3, name: "361Â° BIG3 5.0 PRO ç¯®çƒé‹", category: "basketball", sku: "361B003-03", model: "BIG3-5.0", retailPrice: 799, salePrice: 649, isNew: true,
            images: ["https://placehold.co/600x600/7c2d12/ffffff?text=BIG3+5.0", "https://placehold.co/600x600/7c2d12/ffffff?text=BIG3+ç»†èŠ‚"],
            sizes: [ {size: '40', inStock: true}, {size: '41', inStock: true}, {size: '42', inStock: true}, {size: '43', inStock: true}, {size: '44', inStock: true}, {size: '45', inStock: false}],
            colors: ["é»‘é‡‘", "ç™½è“", "ç‡ƒæ©™"],
            description: "ä¸ºå®æˆ˜è€Œç”Ÿï¼Œæä¾›é¡¶çº§åŒ…è£¹ã€æ”¯æ’‘å’ŒæŠ“åœ°åŠ›ï¼ŒåŠ©æ‚¨æŒæ§å…¨åœºã€‚",
          },
          {
            id: 4, name: "361Â° é›¨å±5.0 å¥æ­¥é‹", category: "lifestyle", sku: "361W004-04", model: "RainScreen-5.0", retailPrice: 659, salePrice: 529, isNew: false,
            images: ["https://placehold.co/600x600/059669/ffffff?text=é›¨å±5.0", "https://placehold.co/600x600/059669/ffffff?text=é›¨å±+é˜²æ°´"],
            sizes: [ {size: '39', inStock: true}, {size: '40', inStock: true}, {size: '41', inStock: true}, {size: '42', inStock: true}, {size: '43', inStock: true}, {size: '44', inStock: true}],
            colors: ["æ·±ç°", "å†›ç»¿", "å¡å…¶"],
            description: "æ­è½½é›¨å±ç§‘æŠ€é‹é¢ï¼Œæ— æƒ§é£é›¨ï¼Œæä¾›å…¨å¤©å€™å¹²çˆ½èˆ’é€‚çš„ç©¿ç€ä½“éªŒã€‚",
          }
        ],
        
        // Methods
        init() {
            setTimeout(() => {
                this.isLoading = false;
            }, 500);
        },
        get filteredProducts() {
          if (!this.searchTerm && this.activeCategory === 'all') return this.products;
          return this.products.filter(p => {
            const matchesCategory = this.activeCategory === 'all' || p.category === this.activeCategory;
            const matchesSearch = this.searchTerm.trim() === '' || p.name.toLowerCase().includes(this.searchTerm.toLowerCase());
            return matchesCategory && matchesSearch;
          });
        },
        displayProductInModal(product) {
            this.selectedProduct = product;
            this.modalImage = product.images[0];
            this.selectedSize = null;
            this.selectedColor = null;
        },
        closeProductModal() {
            this.selectedProduct = null;
        },
        toggleFavorite(productId) {
          if (!this.user) { this.showLoginModal = true; return; }
          const index = this.favorites.indexOf(productId);
          if (index > -1) { 
              this.favorites.splice(index, 1);
              this.showToast('å·²å–æ¶ˆæ”¶è—');
          } else { 
              this.favorites.push(productId); 
              this.showToast('å·²æ”¶è—');
          }
        },
        handleAddToCart() {
            if (!this.user) { 
                this.showLoginModal = true; 
                return; 
            }
            
            const cartId = `${this.selectedProduct.id}-${this.selectedSize}-${this.selectedColor}`;
            const existingItem = this.cart.find(item => item.cartId === cartId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                this.cart.push({
                    cartId: cartId,
                    id: this.selectedProduct.id,
                    name: this.selectedProduct.name,
                    image: this.selectedProduct.images[0],
                    salePrice: this.selectedProduct.salePrice,
                    size: this.selectedSize,
                    color: this.selectedColor,
                    quantity: 1
                });
            }
            this.showToast('å·²æˆåŠŸåŠ å…¥è´­ç‰©è½¦');
            this.closeProductModal();
            setTimeout(() => { this.showCart = true; }, 300);
        },
        removeFromCart(cartId) {
          this.cart = this.cart.filter(item => item.cartId !== cartId);
        },
        updateQuantity(cartId, newQuantity) {
          if (newQuantity < 1) { this.removeFromCart(cartId); return; }
          const item = this.cart.find(item => item.cartId === cartId);
          if (item) item.quantity = newQuantity;
        },
        getTotalPrice() {
          return this.cart.reduce((total, item) => total + (item.salePrice * item.quantity), 0);
        },
        getTotalItems() {
          return this.cart.reduce((total, item) => total + item.quantity, 0);
        },
        handleLogin() {
          if (this.loginForm.email === 'user@example.com' && this.loginForm.password === 'password123') {
            this.user = { id: 1, email: this.loginForm.email, name: 'å¼ ä¸‰' };
            this.showLoginModal = false;
            this.loginForm = { email: '', password: '' };
            this.showToast(`æ¬¢è¿å›æ¥, ${this.user.name}`);
          } else { alert('é‚®ç®±æˆ–å¯†ç é”™è¯¯'); }
        },
        handleRegister() {
          if (this.registerForm.password !== this.registerForm.confirmPassword) {
            alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸åŒ¹é…ï¼Œè¯·é‡æ–°è¾“å…¥ã€‚');
            return;
          }
          this.user = { id: Date.now(), email: this.registerForm.email, name: this.registerForm.name };
          this.showRegisterModal = false;
          this.registerForm = { name: '', email: '', password: '', confirmPassword: '' };
          this.showToast(`æ¬¢è¿, ${this.user.name}! æ‚¨çš„è´¦æˆ·å·²åˆ›å»ºã€‚`);
        },
        logout() {
          this.showToast(`å†è§, ${this.user.name}`);
          this.user = null;
          this.cart = [];
          this.favorites = [];
        },
        showToast(message) {
            if (this.toast.timer) clearTimeout(this.toast.timer);
            this.toast.message = message;
            this.toast.show = true;
            this.toast.timer = setTimeout(() => {
                this.toast.show = false;
            }, 3000);
        }
      }
    }
  </script>
</body>
</html>
